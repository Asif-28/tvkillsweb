{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import React, { useEffect, useCallback, useState } from 'react';\nimport styles from './styles.module.css'\n\nconst defaultCardItems = [\n  (\n    <div key=\"key1\">\n      <h2>First Item</h2>\n      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>\n    </div>\n  ),\n  (\n    <div key=\"key2\">\n      <h2>Second Item</h2>\n      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>\n    </div>\n  ),\n  (\n    <div key=\"key3\">\n      <h2>Third Item</h2>\n      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>\n    </div>\n  )\n];\n\n\nconst setCardStatus = (indexes, cardIndex, showSummary=false) => {\n  // console.log(indexes, cardIndex);\n  if (indexes.currentIndex === cardIndex) {\n    return  styles.active;\n  } else if (indexes.nextIndex === cardIndex) {\n    return showSummary ? `${styles.noTranslate}`: `${styles.next}`;\n  } else if (indexes.previousIndex === cardIndex) {\n    return  showSummary ? `${styles.noTranslate}`: styles.prev;\n  }\n  return styles.inactive;\n}\n\nexport const StackedCarousel = ({ showSummary, style, onCardChange, containerClassName, cardClassName, leftButton, rightButton, autoRotate=true, rotationInterval=2000, children}) => {\n  let cardItems = showSummary ? [1, ...children] : children || defaultCardItems;\n  \n  console.log(showSummary)\n  const [indexes, setIndexes] = useState({\n    previousIndex: cardItems.length-1,\n    currentIndex: 0,\n    nextIndex: 1\n  });\n\n  const handleCardTransition = useCallback(() => {\n    // If we've reached the end, start again from the first card,\n    // but carry previous value over\n    if (indexes.currentIndex >= cardItems.length - 1) {\n      setIndexes({\n        previousIndex: cardItems.length - 1,\n        currentIndex: 0,\n        nextIndex: 1\n      });\n    } else {\n      setIndexes(prevState => ({\n        previousIndex: prevState.currentIndex,\n        currentIndex: prevState.currentIndex + 1 ,\n        nextIndex:\n          prevState.currentIndex + 2 === cardItems.length\n            ? 0\n            : prevState.currentIndex + 2\n      }));\n    }\n  }, [indexes.currentIndex]);\n\n  const handleLeftButton = useCallback(() => {\n    // If we've reached the end, start again from the first card,\n    // but carry previous value over\n    if (indexes.currentIndex <= 0) {\n      setIndexes({\n        previousIndex: cardItems.length - 2,\n        currentIndex: cardItems.length - 1,\n        nextIndex: 0\n      });\n\n    } else {\n      setIndexes(prevState => ({\n        nextIndex: prevState.currentIndex,\n        currentIndex: prevState.currentIndex - 1,\n        previousIndex:\n          prevState.currentIndex - 1 <= 0\n            ? cardItems.length - 1\n            : prevState.currentIndex - 2\n      }));\n    }\n  }, [indexes.currentIndex]);\n\n  \n  useEffect(() => {\n    onCardChange && onCardChange(indexes);\n    const transitionInterval = setInterval(() => {\n      autoRotate && handleCardTransition();\n    }, rotationInterval);\n    return () => clearInterval(transitionInterval);\n  }, [handleCardTransition, indexes, autoRotate]);\n\n  return (\n    <div className={`${styles.container}`}>\n      {\n        leftButton ?\n          <span onClick={handleLeftButton}>{leftButton}</span>\n          : <span className={styles.leftButton} onClick={handleLeftButton}>&lsaquo;</span>\n      }\n      <ul style={{ ...style }} className={`${styles.cardCarousel} ${containerClassName ? containerClassName : styles.carouselDefault}`}>\n        {\n          cardItems.map((card, index) => {\n            if (showSummary && index === 0) {\n              // cardItems.shift()\n              const cardsGallery = cardItems.slice(1);\n              return (<li\n                key={'stacked-carousel'}\n                className={`${cardClassName ? cardClassName : ''} ${styles.card} ${styles.cardSummary} ${setCardStatus(indexes, index, showSummary)}`}\n              >\n\n                {cardsGallery.map((cardItem, cardIndex) => (\n                  <div\n                    key={cardItem.key}\n                    className={`${ cardClassName ? cardClassName : ''} ${setCardStatus(indexes, cardIndex, showSummary)}`}\n                  >\n                    {cardItem}\n                  </div>\n                ))}\n              </li>)\n            } else {\n              return(\n                <li\n                  key={card.key}\n                  className={`${cardClassName ? cardClassName : ''} ${styles.card} ${setCardStatus(indexes, index, showSummary)}`}\n                >\n                  {card}\n                </li>)\n            }\n          }\n          \n        )}\n        </ul>\n      {\n        rightButton ?\n          <span onClick={handleCardTransition}>{rightButton}</span>\n          : <span className={styles.rightButton} onClick={handleCardTransition}>&rsaquo;</span>\n      }\n    </div>\n  );\n}\n\n\n"],"names":["defaultCardItems","React","setCardStatus","indexes","cardIndex","showSummary","currentIndex","styles","active","nextIndex","noTranslate","next","previousIndex","prev","inactive","StackedCarousel","style","onCardChange","containerClassName","cardClassName","leftButton","rightButton","autoRotate","rotationInterval","children","cardItems","console","log","useState","length","setIndexes","handleCardTransition","useCallback","prevState","handleLeftButton","useEffect","transitionInterval","setInterval","clearInterval","container","cardCarousel","carouselDefault","map","card","index","cardsGallery","slice","cardSummary","cardItem","key"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAGA,IAAMA,gBAAgB,GAAG,cAErBC;AAAK,EAAA,GAAG,EAAC;AAAT,gBACEA,sDADF,eAEEA,mGAFF,CAFqB,eAQrBA;AAAK,EAAA,GAAG,EAAC;AAAT,gBACEA,uDADF,eAEEA,mGAFF,CARqB,eAcrBA;AAAK,EAAA,GAAG,EAAC;AAAT,gBACEA,sDADF,eAEEA,mGAFF,CAdqB,CAAzB;;AAsBA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,OAAD,EAAUC,SAAV,EAAqBC,WAArB,EAA2C;AAAA,MAAtBA,WAAsB;AAAtBA,IAAAA,WAAsB,GAAV,KAAU;AAAA;;AAE/D,MAAIF,OAAO,CAACG,YAAR,KAAyBF,SAA7B,EAAwC;AACtC,WAAQG,MAAM,CAACC,MAAf;AACD,GAFD,MAEO,IAAIL,OAAO,CAACM,SAAR,KAAsBL,SAA1B,EAAqC;AAC1C,WAAOC,WAAW,QAAME,MAAM,CAACG,WAAb,QAA+BH,MAAM,CAACI,IAAxD;AACD,GAFM,MAEA,IAAIR,OAAO,CAACS,aAAR,KAA0BR,SAA9B,EAAyC;AAC9C,WAAQC,WAAW,QAAME,MAAM,CAACG,WAAb,GAA4BH,MAAM,CAACM,IAAtD;AACD;;AACD,SAAON,MAAM,CAACO,QAAd;AACD,CAVD;;AAYA,IAAaC,eAAe,GAAG,SAAlBA,eAAkB,OAAuJ;AAAA,MAApJV,WAAoJ,QAApJA,WAAoJ;AAAA,MAAvIW,KAAuI,QAAvIA,KAAuI;AAAA,MAAhIC,YAAgI,QAAhIA,YAAgI;AAAA,MAAlHC,kBAAkH,QAAlHA,kBAAkH;AAAA,MAA9FC,aAA8F,QAA9FA,aAA8F;AAAA,MAA/EC,UAA+E,QAA/EA,UAA+E;AAAA,MAAnEC,WAAmE,QAAnEA,WAAmE;AAAA,6BAAtDC,UAAsD;AAAA,MAAtDA,UAAsD,gCAA3C,IAA2C;AAAA,mCAArCC,gBAAqC;AAAA,MAArCA,gBAAqC,sCAApB,IAAoB;AAAA,MAAdC,QAAc,QAAdA,QAAc;AACpL,MAAIC,SAAS,GAAGpB,WAAW,IAAI,CAAJ,SAAUmB,QAAV,IAAsBA,QAAQ,IAAIxB,gBAA7D;AAEA0B,EAAAA,OAAO,CAACC,GAAR,CAAYtB,WAAZ;;AAHoL,kBAItJuB,cAAQ,CAAC;AACrChB,IAAAA,aAAa,EAAEa,SAAS,CAACI,MAAV,GAAiB,CADK;AAErCvB,IAAAA,YAAY,EAAE,CAFuB;AAGrCG,IAAAA,SAAS,EAAE;AAH0B,GAAD,CAJ8I;AAAA,MAI7KN,OAJ6K;AAAA,MAIpK2B,UAJoK;;AAUpL,MAAMC,oBAAoB,GAAGC,iBAAW,CAAC,YAAM;AAG7C,QAAI7B,OAAO,CAACG,YAAR,IAAwBmB,SAAS,CAACI,MAAV,GAAmB,CAA/C,EAAkD;AAChDC,MAAAA,UAAU,CAAC;AACTlB,QAAAA,aAAa,EAAEa,SAAS,CAACI,MAAV,GAAmB,CADzB;AAETvB,QAAAA,YAAY,EAAE,CAFL;AAGTG,QAAAA,SAAS,EAAE;AAHF,OAAD,CAAV;AAKD,KAND,MAMO;AACLqB,MAAAA,UAAU,CAAC,UAAAG,SAAS;AAAA,eAAK;AACvBrB,UAAAA,aAAa,EAAEqB,SAAS,CAAC3B,YADF;AAEvBA,UAAAA,YAAY,EAAE2B,SAAS,CAAC3B,YAAV,GAAyB,CAFhB;AAGvBG,UAAAA,SAAS,EACPwB,SAAS,CAAC3B,YAAV,GAAyB,CAAzB,KAA+BmB,SAAS,CAACI,MAAzC,GACI,CADJ,GAEII,SAAS,CAAC3B,YAAV,GAAyB;AANR,SAAL;AAAA,OAAV,CAAV;AAQD;AACF,GAnBuC,EAmBrC,CAACH,OAAO,CAACG,YAAT,CAnBqC,CAAxC;AAqBA,MAAM4B,gBAAgB,GAAGF,iBAAW,CAAC,YAAM;AAGzC,QAAI7B,OAAO,CAACG,YAAR,IAAwB,CAA5B,EAA+B;AAC7BwB,MAAAA,UAAU,CAAC;AACTlB,QAAAA,aAAa,EAAEa,SAAS,CAACI,MAAV,GAAmB,CADzB;AAETvB,QAAAA,YAAY,EAAEmB,SAAS,CAACI,MAAV,GAAmB,CAFxB;AAGTpB,QAAAA,SAAS,EAAE;AAHF,OAAD,CAAV;AAMD,KAPD,MAOO;AACLqB,MAAAA,UAAU,CAAC,UAAAG,SAAS;AAAA,eAAK;AACvBxB,UAAAA,SAAS,EAAEwB,SAAS,CAAC3B,YADE;AAEvBA,UAAAA,YAAY,EAAE2B,SAAS,CAAC3B,YAAV,GAAyB,CAFhB;AAGvBM,UAAAA,aAAa,EACXqB,SAAS,CAAC3B,YAAV,GAAyB,CAAzB,IAA8B,CAA9B,GACImB,SAAS,CAACI,MAAV,GAAmB,CADvB,GAEII,SAAS,CAAC3B,YAAV,GAAyB;AANR,SAAL;AAAA,OAAV,CAAV;AAQD;AACF,GApBmC,EAoBjC,CAACH,OAAO,CAACG,YAAT,CApBiC,CAApC;AAuBA6B,EAAAA,eAAS,CAAC,YAAM;AACdlB,IAAAA,YAAY,IAAIA,YAAY,CAACd,OAAD,CAA5B;AACA,QAAMiC,kBAAkB,GAAGC,WAAW,CAAC,YAAM;AAC3Cf,MAAAA,UAAU,IAAIS,oBAAoB,EAAlC;AACD,KAFqC,EAEnCR,gBAFmC,CAAtC;AAGA,WAAO;AAAA,aAAMe,aAAa,CAACF,kBAAD,CAAnB;AAAA,KAAP;AACD,GANQ,EAMN,CAACL,oBAAD,EAAuB5B,OAAvB,EAAgCmB,UAAhC,CANM,CAAT;AAQA,sBACErB;AAAK,IAAA,SAAS,OAAKM,MAAM,CAACgC;AAA1B,KAEInB,UAAU,gBACRnB;AAAM,IAAA,OAAO,EAAEiC;AAAf,KAAkCd,UAAlC,CADQ,gBAENnB;AAAM,IAAA,SAAS,EAAEM,MAAM,CAACa,UAAxB;AAAoC,IAAA,OAAO,EAAEc;AAA7C,cAJR,eAMEjC;AAAI,IAAA,KAAK,eAAOe,KAAP,CAAT;AAAyB,IAAA,SAAS,EAAKT,MAAM,CAACiC,YAAZ,UAA4BtB,kBAAkB,GAAGA,kBAAH,GAAwBX,MAAM,CAACkC,eAA7E;AAAlC,KAEIhB,SAAS,CAACiB,GAAV,CAAc,UAACC,IAAD,EAAOC,KAAP,EAAiB;AAC7B,QAAIvC,WAAW,IAAIuC,KAAK,KAAK,CAA7B,EAAgC;AAE9B,UAAMC,YAAY,GAAGpB,SAAS,CAACqB,KAAV,CAAgB,CAAhB,CAArB;AACA,0BAAQ7C;AACN,QAAA,GAAG,EAAE,kBADC;AAEN,QAAA,SAAS,GAAKkB,aAAa,GAAGA,aAAH,GAAmB,EAArC,UAA2CZ,MAAM,CAACoC,IAAlD,SAA0DpC,MAAM,CAACwC,WAAjE,SAAgF7C,aAAa,CAACC,OAAD,EAAUyC,KAAV,EAAiBvC,WAAjB;AAFhG,SAKLwC,YAAY,CAACH,GAAb,CAAiB,UAACM,QAAD,EAAW5C,SAAX;AAAA,4BAChBH;AACE,UAAA,GAAG,EAAE+C,QAAQ,CAACC,GADhB;AAEE,UAAA,SAAS,GAAM9B,aAAa,GAAGA,aAAH,GAAmB,EAAtC,UAA4CjB,aAAa,CAACC,OAAD,EAAUC,SAAV,EAAqBC,WAArB;AAFpE,WAIG2C,QAJH,CADgB;AAAA,OAAjB,CALK,CAAR;AAcD,KAjBD,MAiBO;AACL,0BACE/C;AACE,QAAA,GAAG,EAAE0C,IAAI,CAACM,GADZ;AAEE,QAAA,SAAS,GAAK9B,aAAa,GAAGA,aAAH,GAAmB,EAArC,UAA2CZ,MAAM,CAACoC,IAAlD,SAA0DzC,aAAa,CAACC,OAAD,EAAUyC,KAAV,EAAiBvC,WAAjB;AAFlF,SAIGsC,IAJH,CADF;AAOD;AACF,GA3BD,CAFJ,CANF,EAwCItB,WAAW,gBACTpB;AAAM,IAAA,OAAO,EAAE8B;AAAf,KAAsCV,WAAtC,CADS,gBAEPpB;AAAM,IAAA,SAAS,EAAEM,MAAM,CAACc,WAAxB;AAAqC,IAAA,OAAO,EAAEU;AAA9C,cA1CR,CADF;AA+CD,CA7GM;;;;"}